<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>OpenRouter Cost Visualizer</title>
	<link rel="icon" type="image/png" href="counting-money.png">
	<link rel="stylesheet" href="./styles.css" />
	<!-- Charts -->
	<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
	<script defer src="./app.js"></script>
</head>
<body>
	<header class="topbar">
		<div class="brand">OpenRouter Cost Visualizer</div>

		<div class="controls">
			<div class="control">
				<div id="dropZone" class="drop-zone">
					<div class="drop-zone-content">
						<div class="drop-zone-icon">üìÅ</div>
						<div class="drop-zone-text">
							<div>Drop CSV file here</div>
							<div class="drop-zone-subtext">or click to browse</div>
						</div>
					</div>
					<input id="csvFile" type="file" accept=".csv" hidden />
				</div>
			</div>

			<div class="divider"></div>

			<label class="control">
				<span>From</span>
				<input id="fromDate" type="date" />
			</label>

			<label class="control">
				<span>To</span>
				<input id="toDate" type="date" />
			</label>

			<button id="applyFilters" class="btn primary" type="button">Apply</button>
			<button id="resetFilters" class="btn" type="button">Reset</button>

			<div class="divider"></div>

			<div class="control model-filter">
				<span>Filter models</span>
				<button id="modelFilterBtn" class="btn" type="button">All models</button>
				<div id="modelFilterPanel" class="model-panel" hidden>
					<div class="model-panel-head">
						<input id="modelSearch" type="text" placeholder="Search models..." />
						<div class="spacer"></div>
						<button id="modelSelectAll" class="btn mini" type="button">All</button>
						<button id="modelSelectNone" class="btn mini" type="button">None</button>
					</div>
					<div class="model-list" id="modelList"></div>
				</div>
			</div>
		</div>
	</header>

	<main class="layout">
		<section class="top-section">
			<section class="left-panel">
				<h2>Costs</h2>

				<div class="table-wrap">
					<table id="costTable">
						<thead>
							<tr>
								<th>Model</th>
								<th>Requests</th>
								<th>Total Cost</th>
								<th>Web Search</th>
								<th>BYOK</th>
								<th>Tokens Prompt</th>
								<th>Tokens Completion</th>
								<th>Tokens Reasoning</th>
								<th>Avg Gen Time</th>
							</tr>
						</thead>
						<tbody>
							<!-- Filled dynamically -->
						</tbody>
					</table>
				</div>
			</section>

			<section class="right-panel">
				<div class="kpis">
					<div class="kpi"><div class="kpi-title">Requests</div><div class="kpi-value" id="kpiRequests">-</div></div>
					<div class="kpi"><div class="kpi-title">Total Cost</div><div class="kpi-value" id="kpiTotalCost">-</div></div>
					<div class="kpi"><div class="kpi-title">Avg Cost / Req</div><div class="kpi-value" id="kpiAvgCost">-</div></div>
					<div class="kpi"><div class="kpi-title">Time Window</div><div class="kpi-value" id="kpiWindow">-</div></div>
				</div>
			</section>
		</section>

		<section class="below-panels">
			<div class="card">
				<h3>Cost by Model</h3>
				<canvas id="barCostByModel"></canvas>
			</div>

			<div class="card">
				<h3>Cost Over Time (Hourly)</h3>
				<canvas id="lineCostOverTime"></canvas>
			</div>

			<div class="card">
				<h3>Notes</h3>
				<ul class="notes">
					<li>Blank numeric fields are treated as 0. Negative cache values are summed as credits.</li>
					<li>Use multi-select to focus on one or more models.</li>
					<li>Date inputs use native calendar pickers; filtering is inclusive for whole days.</li>
				</ul>
			</div>
		</section>
	</main>
</body>
</html>
</html>
